
# log files คืออะไร
ก่อนจะเข้าถึงบทบาทของ log files ในระบบของ linux เรามาทำความเข้าใจเกี่ยวกับ log files ก่อนว่ามันคืออะไร มีประโยชน์ด้านใดบ้าง

**log files** ในที่นี้เปรียบเสมือนสมุดจดบันทึกกิจกรรมต่างๆที่เกิดขึ้นภายในระบบของคอมพิวเตอร์ การติดต่อสื่อสารที่เกิดขึ้นในระบบคอมพิวเตอร์ แสดงถึงต้นทาง, ปลายทาง, เส้นทาง, เวลา, วันที่, ปริมาณ หรืออื่นๆ ถูกบันทึกไว้ใน log files ตามที่กล่าวไปจะเห็นได้เลยว่า log files ทำให้การใช้งานบน internet รู้ว่าต้นสายปลายทางเป็นใคร ทำให้สามารถระบุตัวตนของผู้ใช้งานได้ 

ยกตัวอย่างเพิ่มเติมในการใช้ log files เมื่อมีเทคโนโลยีที่ก้าวหน้า ย่อมเป็นสิ่งที่ดีในการอำนวยความสะดวกให้กับคนอย่างเราๆ แต่ก็ตามสภาพของความเป็นจริงคือ ที่ใดมีดีย่อมมีสิ่งที่ไม่ดีปะปนอยู่ด้วยเช่นกันดังนั้น log files ก็สามารถใช้ในการตรวจสอบแก้ไขปัญหาการส่งข้อมูลผิด ทำให้เกิดความเสียหายในหลายๆส่วน เช่น การขโมยข้อมูล การใส่ร้ายป้ายสี เป็นต้น หรืออีกกรณีคือการกระทำที่เกิดจากโปรแกรมที่ไม่พึงประสงค์ ทำการโจมตีทำให้เกิดความเสียหายในระบบเครือข่าย ซึ่งอาจทำให้เกิดความเสียหายเป็นวงกว้าง การที่มีข้อมูลจาก log files ก็ทำให้เราตรวจสอบที่ไปที่มาของการกระทำเหล่านี้ ทำให้สามารถหาสาเหตุและวิเคราะห์หาวิธีการแก้ไขได้ตรงจุดและไวยิ่งขึ้น

## บทบาทพื้นฐานของ Logfiles ในระบบปฎิบัติการ Linux

log files ในระบบ Linux เป็นไฟล์ที่บันทึกข้อมูลที่เกิดขึ้นในระบบ เช่น การทำงานของโปรแกรม, Error, Warning และกิจกรรมอื่นๆ ที่เกี่ยวข้องกับการใช้งานในระบบ ซึ่ง log files มีบทบาทสำคัญในหลายด้าน
1. **Troubleshooting** : เมื่อเกิด Error ขึ้นในระบบ Linux เราสามารถระบุปัญหาที่เกิดขึ้นได้ด้วย log files โดยการตรวจสอบ system logs, application logs และ service logs เรายังสามารถที่จะระบุ error, warning และข้อความอื่นๆ ที่ชี้ที่ข้อผิดพลาดได้โดยตรง

2. **Diagnosing Performance Issues** : system logs สามารถระบุปัญหาเกี่ยวกับประสิทธิภาพ เช่น memory leaks หรือ ข้อจำกัดของการอ่าน/เขียนข้อมูลของดิสก์ การตรวจสอบ application logs ยังช่วยระบุปัญหาเกี่ยวกับประสิทธิภาพของ application ได้อีกด้วย

3. **Monitoring System Health** : เราสามารถตรวจสอบ logfiles เพื่อดูแนวโน้มสถานะของระบบว่ามีแนวโน้มไปทางที่ดีหรือแย่ หากเกิดแย่ขึ้นมาก็สามารถตรวจจับปัญหาที่เกิดขึ้นได้ก่อนที่มันจะสายไป ทั้งนี้การดู logfiles อาจทำให้เห็นปัญหาที่เกิดขึ้นในระบบได้

4. **Compliance and Auditing** : การบันทึกข้อมูลในระบบ Linux เป็นเครื่องมือสำคัญสำหรับองค์กรในการปฏิบัติตามข้อกำหนดทางกฎหมายและการตรวจสอบ โดยบันทึกนี้ช่วยในการระบุกิจกรรมของระบบและเหตุการณ์ที่สำคัญ เช่น การเข้าถึงข้อมูลที่มีความลับ การเปลี่ยนแปลงในการกำหนดค่าของระบบ และการเข้าถึงข้อมูลที่สำคัญ การเก็บบันทึกอย่างครอบคลุมช่วยให้องค์กรสามารถปรับปรุงความปลอดภัยและการดำเนินการได้อย่างมีประสิทธิภาพในระบบ IT

5. **Security** : Linux logs เป็นเครื่องมือสำคัญในการตรวจจับและตรวจสอบปัญหาด้านความปลอดภัย บันทึกของระบบสามารถใช้ตรวจจับการเข้าถึงระบบโดยไม่ได้รับอนุญาต และบันทึกแอปพลิเคชันช่วยระบุกิจกรรมที่อาจมีลักษณะเสี่ยงภายในแอปพลิเคชันได้ด้วยการตรวจสอบบันทึกเหล่านี้ ทำให้แอดมินสามารถระบุและตอบสนองต่อเหตุการณ์ความปลอดภัยได้อย่างรวดเร็ว

## ประเภทของ Log files ที่สำคัญในระบบ Linux

logfiles ในระบบ linux สามารถแบ่งได้เป็นหลายประเภทตามแหล่งที่มาหรือวัตถุประสงค์ของการบันทึก นี่เป็น 4 ประเภทของ logfiles ที่พบได้บ่อยๆในระบบ Linux

1. **System Logs** : logs นี้จะมีข้อมูลเกียวกับการทำงานของระบบ เช่น ข้อความการบูต (boot messages), ข้อความเกิดจาก kernel, และเหตุการณ์ที่เกี่ยวข้องกับฮาร์ดแวร์ System logs เป็นสิ่งสำคัญสำหรับการแก้ไขปัญหาในระบบ และการตรวจสอบประสิทธิภาพของระบบ

2. **Application Logs** : logs นี้บันทึกข้อมูลการทำงานของ Application ซึ่งรวมถึง Error, Warnings และข้อความอื่นๆ Application logs ใช้ในการวิเคราะห์ปัญหาที่เกิดขึ้นใน application 

3. **Service Logs** : logs นี้บันทึกข้อมูลเกี่ยวกับ services ที่กำลังทำงานบนระบบ ซึ่งรวมถึงบริการเครือข่ายและ*เดมอน Service logs ใช้ในการตรวจสอบกิจกรรมและปรับปรุงประสิทธิภาพของ services 

4. **Event Logs** : บันทึกเหตุการณ์เหล่านี้ประกอบด้วยข้อมูลเกี่ยวกับเหตุการณ์ในระบบ เช่น เข้าสู่ระบบของผู้ใช้, การปิดระบบ, และเหตุการณ์ด้านความปลอดภัย บันทึกเหตุการณ์นี้ใช้ในการตรวจสอบกิจกรรมของระบบ, ติดตามกิจกรรมของผู้ใช้, และสืบสวนเหตุการณ์ด้านความปลอดภัย

## การเข้าดู Log files ผ่าน CLI
ขั้นตอนแรกให้เราทำการเข้าไปดูที่ /var/log ผ่านคำสั่ง

	cd /var/log
แล้วทำการรันคำสั่ง
	
	ls -la
และนี้คือผลลัพธ์ที่ได้

![enter image description here](https://media.discordapp.net/attachments/1110947924369743925/1205859121971204106/image.png?ex=65d9e6d2&is=65c771d2&hm=1424b9090e6161c3af2521d91de2cdfc216a18d42ada8398c73926cbfce41cdb&=&format=webp&quality=lossless)

เราจะเห็นได้เลยว่ามี logfiles อยู่ใน dir นี้ ไม่ว่าจะเป็น kern.log, syslog, dmesg, boostrap.log ฯ โดยในที่นี้ผมจะใช้ syslog ในการแสดงผลเป็นส่วนใหญ่ครับ เราไปเริ่มกันที่คำสั่งแรกเลย

### CAT 
เราสามารถใช้คำสั่ง cat เพื่อให้แสดงผลบันทึกที่อยู่ใน logfiles ที่เราต้องการได้ครับ โดยใช้คำสั่ง cat ตามด้วยที่อยู่ของ logfiles ที่เราต้องการที่จะแสดงผล โดยที่นี้เราจะแสดงผลของ syslog ครับ

	cat /var/log/syslog
![enter image description here](https://media.discordapp.net/attachments/1110947924369743925/1205863416342909018/image.png?ex=65d9ead2&is=65c775d2&hm=a8516712c496a9ec4f67b7e3c17d8bd99528181e03c5c615825550531ed2f2f5&=&format=webp&quality=lossless)
โดยจากผลลัพธ์จะเห็นได้ว่ามีการแสดงผลบันทึกการทำงานของระบบ ข้อมูลต่างๆที่เกี่ยวข้องกับการทำงานของระบบ เช่น ข้อความเกี่ยวกับการบูตของระบบ, ข้อความการเชื่อมต่อเครือข่าย, ข้อความที่เกี่ยวกับการทำงานกับ software ต่างๆ และอื่นๆ ซึ่งจากที่เห็นการบันทึกด้านหน้าจะมีเวลาอยู่ด้วยนั่นเอง

เนื่องจากการใช้ cat ทำให้แสดงผลที่อยู่ใน logfiles ทั้งหมดออกมาเราอาจจะใช้งานร่วมกับ | more (pipe more) เพื่อเรียกดูทีละบรรทัดก็ได้

ถ้าเราอยากแสดงผลเฉพาะบรรทัดที่เราต้องการที่จะดู ยกตัวอย่างเช่นอยากได้เฉพาะข้อความใน logfiles syslog ที่มีคำว่า "error" อยู่ในบรรทัดนั้น เราก็สามารถใช้ **grep** ร่วมกันกับ cat ได้ ยกตัวอย่างการใช้งาน

	cat /var/log/syslog | grep error
![enter image description here](https://media.discordapp.net/attachments/1110947924369743925/1205865598907842580/image.png?ex=65d9ecda&is=65c777da&hm=287628bcf736e779ec89a7a1099ba540600a25ba8cc18d785684975f35064b65&=&format=webp&quality=lossless)
ก็จะเห็นได้ชัดจากผลลัพธ์เลยว่าทุกบรรทัดที่แสดงผลจะมีคำว่า "error" ร่วมอยู่ด้วย
